# V3 - 차세대 하이브리드 검색 엔진

검색 정확도를 혁신적으로 개선한 최신 버전입니다.

## 🎯 핵심 혁신
- **직접 키워드 매칭**: 정확한 단어 포함 구간 우선순위
- **하이브리드 점수**: 직접매칭(40%) + 시맨틱(30%) + 제품키워드(30%)
- **지능형 문자열 매칭**: 띄어쓰기 변형, 부분 매칭 지원
- **확장된 키워드 사전**: "맘마", "맘마존" 등 누락 키워드 추가

## 🔧 파일 구성
- `enhanced_semantic_search.py` - **메인 검색 엔진** (추천)
- `improved_preprocessing.py` - 개선된 전처리

## 🚀 사용법
```bash
cd v3
python enhanced_semantic_search.py
```

## 📊 V2와의 차이점

### V2 (enhanced_product_search.py)
- 기존 ProductSemanticSearch 클래스 활용
- UI 개선에 초점
- 제품 가중치 조절 기능

### V3 (enhanced_semantic_search.py) ⭐
- **완전히 새로운 검색 엔진**
- **직접 키워드 매칭** 알고리즘 추가
- **하이브리드 점수** 계산
- **지능형 문자열 매칭** (SequenceMatcher 활용)

## 🎮 검색 정확도 비교

### V1 (기본)
```
"맘마" 검색 → 실제 "맘마 존" 구간 찾지 못함 ❌
```

### V2 (제품 특화) 
```
"맘마" 검색 → 관련 구간은 찾지만 정확도 낮음 ⚠️
```

### V3 (하이브리드) ✅
```
"맘마" 검색 결과:
1. 시작: 597.6초, 점수: 0.9625 (직접매칭: 1.0)
   텍스트: 응 여기가 저희 맘마 존이 완성됐어요
   
2. 시작: 8.6초, 점수: 0.9622 (직접매칭: 1.0)  
   텍스트: 여기가 저희 맘마 존이 완성됐어요 🎯
```

## 💡 핵심 개선사항

### 1. 직접 키워드 매칭 알고리즘
```python
def _calculate_direct_match_score(self, keyword, text):
    # 1. 정확한 매칭
    if keyword_lower in text_lower:
        return 1.0
    # 2. 공백 제거 후 매칭  
    # 3. 부분 매칭 (유사도 기반)
```

### 2. 하이브리드 점수 계산
```python
final_similarity = (
    direct_weight * direct_score +      # 40%
    semantic_weight * semantic_score +  # 30% 
    product_weight * product_score      # 30%
)
```

### 3. 확장된 제품 키워드 사전
- 아기용품: **"맘마", "맘마존"** 등 추가
- 음식점: **"맛집", "식당", "레스토랑"** 등 추가
- 총 100+ 키워드로 확장

## 🎯 권장 사용 시나리오
- **최고 정확도가 필요한 경우**
- **정확한 키워드가 포함된 구간을 찾고 싶은 경우**
- **제품/음식점 언급 구간을 정밀하게 찾고 싶은 경우**